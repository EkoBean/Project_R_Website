<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>文章編輯與預覽</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <style>
    .card-img-top {
      max-height: 200px;
      object-fit: cover;
    }
    textarea {
      resize: vertical;
    }
  </style>
</head>
<body class="container py-4">

  <h2 class="mb-4">部落格文章編輯與預覽</h2>
  <div class="row">
    <!-- 編輯區 -->
    <div class="col-md-6">
      <form id="postForm">
        <div class="mb-3">
          <label for="titleInput" class="form-label">標題</label>
          <input type="text" class="form-control" id="titleInput" placeholder="輸入文章標題">
        </div>
        <div class="mb-3">
          <label for="contentInput" class="form-label">內文</label>
          <textarea class="form-control" id="contentInput" rows="5" placeholder="輸入文章內容"></textarea>
        </div>
        <div class="mb-3">
          <label for="imageInput" class="form-label">上傳封面圖片</label>
          <input class="form-control" type="file" id="imageInput" accept="image/*">
        </div>
      </form>
    </div>

    <!-- 預覽區 -->
    <div class="col-md-6">
      <h5 class="mb-3">預覽結果</h5>
      <div class="card" id="previewCard" role="button" data-bs-toggle="modal" data-bs-target="#previewModal">
        <img src="" alt="封面圖片" class="card-img-top" id="previewImage">
        <div class="card-body">
          <h5 class="card-title" id="previewTitle">預覽標題</h5>
          <p class="card-text" id="previewContent">預覽內文</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal 彈窗 -->
  <div class="modal fade" id="previewModal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalTitle">預覽標題</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="關閉"></button>
        </div>
        <div class="modal-body">
          <img src="" alt="封面圖片" class="img-fluid mb-3" id="modalImage">
          <p id="modalContent">預覽內文</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- 自訂 JS -->
  <script>
    const titleInput = document.getElementById("titleInput");
    const contentInput = document.getElementById("contentInput");
    const imageInput = document.getElementById("imageInput");

    const previewTitle = document.getElementById("previewTitle");
    const previewContent = document.getElementById("previewContent");
    const previewImage = document.getElementById("previewImage");

    const modalTitle = document.getElementById("modalTitle");
    const modalContent = document.getElementById("modalContent");
    const modalImage = document.getElementById("modalImage");

    // 同步標題與內文
    titleInput.addEventListener("input", () => {
      previewTitle.textContent = titleInput.value || "預覽標題";
      modalTitle.textContent = titleInput.value || "預覽標題";
    });

    contentInput.addEventListener("input", () => {
      previewContent.textContent = contentInput.value || "預覽內文";
      modalContent.textContent = contentInput.value || "預覽內文";
    });

    // 上傳圖片
    imageInput.addEventListener("change", () => {
      const file = imageInput.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = () => {
          previewImage.src = reader.result;
          modalImage.src = reader.result;
        };
        reader.readAsDataURL(file);
      }
    });
  </script>
</body>
</html>
